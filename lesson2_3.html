<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>The GPU & CPU vs. GPU (HL)</title>
    <meta name="description" content="An interactive, world-class guide to GPU architecture and CPU vs. GPU differences (HL), aligned with the IB Computer Science syllabus." />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ccircle cx='50' cy='50' r='48' fill='%233B82F6'/%3E%3Ctext x='50' y='62' font-size='60' text-anchor='middle' fill='white' font-family='Inter' %3E%E2%8E%8A%3C/text%3E%3C/svg%3E" />
    <style>
        html { scroll-behavior: smooth; }
        body { font-family: 'Inter', system-ui, sans-serif; padding-bottom: 80px; }
        .nav-link { transition: color .2s, border-bottom-color .2s; border-bottom: 2px solid transparent; cursor: pointer; }
        .nav-link:hover, .nav-link.active { color: #3B82F6; border-bottom-color: #3B82F6; }
        .page-content { display: none; }
        .page-content.active { display: block; animation: fadeIn 0.5s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .fde-component.highlight {
            background-color: #DBEAFE; /* light blue */
            color: #1E40AF; /* dark blue */
            border-color: #3B82F6;
            transform: scale(1.03);
            box-shadow: 0 4px 14px 0 rgba(59, 130, 246, 0.3);
            transition: all 0.7s ease-in-out;
        }
        .processing-grid-cell { width: 1rem; height: 1rem; background-color: #E2E8F0; transition: background-color .1s ease-in-out; }
        .processing-grid-cell.processing { background-color: #FBBF24; }
        .processing-grid-cell.done { background-color: #22c55e; }
        .quiz-option { transition: all 0.2s ease; }
        .quiz-option:disabled { cursor: not-allowed; }
        .quiz-option.correct { background-color: #D1FAE5 !important; border-color: #10B981 !important; color: #065F46 !important; }
        .quiz-option.incorrect { background-color: #FEE2E2 !important; border-color: #EF4444 !important; color: #991B1B !important; }
        .chart-container { position: relative; width: 100%; max-width: 800px; margin-left: auto; margin-right: auto; height: 400px; max-height: 50vh; }
    </style>
</head>
<body class="antialiased bg-zinc-50 text-slate-700">
    <a href="#main-content" class="sr-only focus:not-sr-only focus:fixed focus:top-2 focus:left-2 bg-blue-600 text-white px-3 py-2 rounded-lg z-50">Skip to main content</a>

    <header class="bg-white/80 backdrop-blur-md shadow-sm sticky top-0 z-40">
        <div class="container mx-auto px-6 py-4 flex justify-between items-center">
            <h1 class="text-xl font-bold text-gray-800">The GPU & Primary Memory</h1>
            <nav class="hidden md:flex items-center space-x-1" aria-label="Primary">
                <div class="flex items-center space-x-1 lg:space-x-4">
                    <a data-target="home" class="nav-link font-medium px-3 py-2 rounded-md">Home</a>
                    <a data-target="gpu" class="nav-link font-medium px-3 py-2 rounded-md">Role of GPU</a>
                    <a data-target="cpuvsgpu" class="nav-link font-medium px-3 py-2 rounded-md">CPU vs. GPU (HL)</a>
                    <a data-target="simulations" class="nav-link font-medium px-3 py-2 rounded-md">Simulations</a>
                    <a data-target="videos" class="nav-link font-medium px-3 py-2 rounded-md">Videos</a>
                    <a data-target="quiz" class="nav-link font-medium px-3 py-2 rounded-md">Quiz</a>
                </div>
                <div class="ml-4 pl-4 border-l border-gray-300">
                    <a href="index.html" class="inline-flex items-center bg-blue-100 text-blue-800 px-4 py-2 rounded-full text-sm font-semibold hover:bg-blue-200 transition-colors">
                        Back to Curriculum
                    </a>
                </div>
            </nav>
            <button type="button" id="mobile-menu-button" class="md:hidden focus:outline-none" aria-expanded="false" aria-controls="mobile-menu" aria-label="Open navigation">
                <svg class="w-7 h-7" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path></svg>
            </button>
        </div>
        <div id="mobile-menu" class="hidden md:hidden">
            <div class="px-4 pb-4 space-y-1">
                <a data-target="home" class="nav-link mobile-link block py-2 px-3 rounded-lg">Home</a>
                <a data-target="gpu" class="nav-link mobile-link block py-2 px-3 rounded-lg">Role of GPU</a>
                <a data-target="cpuvsgpu" class="nav-link mobile-link block py-2 px-3 rounded-lg">CPU vs. GPU (HL)</a>
                <a data-target="simulations" class="nav-link mobile-link block py-2 px-3 rounded-lg">Simulations</a>
                <a data-target="videos" class="nav-link mobile-link block py-2 px-3 rounded-lg">Videos</a>
                <a data-target="quiz" class="nav-link mobile-link block py-2 px-3 rounded-lg">Quiz</a>
                <div class="mt-2 pt-2 border-t border-zinc-200">
                     <a href="index.html" class="block text-center py-2 px-3 rounded-lg bg-blue-100 text-blue-800 font-semibold">Back to Curriculum</a>
                </div>
            </div>
        </div>
    </header>

    <main id="main-content" class="container mx-auto px-6 py-10">
        <!-- Content sections will be populated by JavaScript -->
    </main>
    
    <footer class="fixed bottom-0 left-0 w-full bg-white/80 backdrop-blur-md py-2 border-t border-stone-200 text-center text-sm text-stone-500 z-30">
        <div class="container mx-auto px-6 flex justify-center items-center space-x-4">
            <a href="https://www.linkedin.com/in/emmayeboah360/" class="text-blue-600 hover:text-blue-800" target="_blank" rel="noopener">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" viewBox="0 0 24 24" fill="currentColor"><path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.762s.784-1.762 1.75-1.762 1.75.79 1.75 1.762-.784 1.762-1.75 1.762zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"/></svg>
            </a>
            <a href="mailto:yemmanuel308@gmail.com" class="text-rose-600 hover:text-rose-800">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" viewBox="0 0 24 24" fill="currentColor"><path d="M12 12.713l-11.75 6.287 11.75 5.5zM23.75 18.995l-11.75-6.287v11.748zM12 11.287l-12-6.287v1.868l12 6.287l12-6.287v-1.868z"/></svg>
            </a>
            <p class="pl-4">&copy; 2025 Emmanuel Yeboah. All rights reserved.</p>
        </div>
    </footer>
    
    <script>
    document.addEventListener('DOMContentLoaded', function () {
        // --- Data Store ---
        const sections = {
            home: {
                title: "Home",
                content: `<div class="text-center"><h2 class="text-4xl lg:text-5xl font-extrabold text-gray-900 tracking-tight">Specialized Processing: The GPU</h2><p class="mt-4 max-w-3xl mx-auto text-lg text-slate-600">This guide provides a world-class exploration of the Graphics Processing Unit (GPU), its unique architecture, and how it compares to the CPU.</p></div><div class="mt-10 max-w-4xl mx-auto bg-white border border-zinc-200 p-6 rounded-lg shadow-sm text-left"><h3 class="text-xl font-bold text-gray-800 text-center mb-4">Syllabus Focus</h3><p class="font-semibold text-slate-700">This lesson covers the following IB Computer Science syllabus points. By exploring all the tabs, you will master:</p><ul class="mt-4 space-y-4 text-slate-600"><li><div class="p-4 bg-zinc-50 rounded-md border border-zinc-200"><strong class="font-semibold text-blue-800 block">A1.1.2: Describe the role of a GPU</strong><p class="pl-4 mt-1 text-sm">Understand the architecture that allows GPUs to handle specific tasks and their real-world applications in gaming, AI, and large simulations.</p></div></li><li><div class="p-4 bg-zinc-50 rounded-md border border-zinc-200"><strong class="font-semibold text-blue-800 block">A1.1.3: Explain the differences between the CPU and the GPU (HL Only)</strong><p class="pl-4 mt-1 text-sm">Explain the differences in design philosophies, core architecture, memory access, and how they collaborate to enhance system performance.</p></div></li></ul></div>`
            },
            gpu: {
                title: "Role of the GPU",
                content: `<div class="max-w-4xl mx-auto"><div class="text-center"><p class="font-semibold text-blue-600">Syllabus A1.1.2</p><h2 class="mt-2 text-3xl sm:text-4xl font-extrabold text-gray-900">The Role of the GPU</h2><p class="mt-4 text-lg text-slate-600">A <strong>Graphics Processing Unit (GPU)</strong> is a specialized electronic circuit designed to accelerate the creation and rendering of images, videos, and animations by performing rapid mathematical calculations.</p></div><div class="mt-12 space-y-8"><div><h3 class="text-2xl font-bold text-gray-800">GPU Architecture</h3><p class="mt-2 text-slate-600">The key to a GPU's power is its <strong>highly parallel structure</strong>. Unlike a CPU, which has a few very powerful cores for handling tasks sequentially, a GPU contains <strong>thousands of smaller, efficient cores</strong>. This architecture allows a GPU to break down a large, complex problem into many small pieces and work on them all at the same time. This is known as <strong>parallel processing</strong>. Because of this architecture, GPUs are optimized for <strong>high throughput</strong>, meaning they can process a massive amount of data simultaneously.</p></div><div><h3 class="text-2xl font-bold text-gray-800">Real-World Scenarios & Applications</h3><ul class="mt-4 space-y-4"><li><div class="bg-white border border-zinc-200 p-4 rounded-lg"><h4 class="font-semibold text-gray-900">Video Games & Graphics Rendering</h4><p class="text-slate-600">In video games, GPUs are essential for rendering complex visuals in real-time. They process thousands of pixels simultaneously to calculate color, position, and texture, and handle the application of <strong>shaders and textures</strong> to 3D models to create realistic lighting and details. This offloads the intensive rendering work from the CPU, resulting in smoother frame rates and a more immersive experience.</p></div></li><li><div class="bg-white border border-zinc-200 p-4 rounded-lg"><h4 class="font-semibold text-gray-900">Artificial Intelligence (AI) and Machine Learning</h4><p class="text-slate-600">GPUs have become indispensable for AI and machine learning. Training deep learning models involves performing extensive <strong>matrix and vector multiplications</strong> on large datasets. The parallel nature of a GPU allows it to perform these calculations much faster than a CPU, significantly reducing the time it takes to train complex models.</p></div></li><li><div class="bg-white border border-zinc-200 p-4 rounded-lg"><h4 class="font-semibold text-gray-900">Large Simulations & Scientific Computing</h4><p class="text-slate-600">In scientific fields, GPUs accelerate large simulations and data analysis. Their parallel processing capabilities are used for tasks like climate modeling, bioinformatics, and physics simulations. For example, in genome sequencing, GPUs can rapidly compare millions of DNA sequences against a reference, a task that is highly parallelizable.</p></div></li></ul></div></div></div>`
            },
            cpuvsgpu: {
                title: "CPU vs. GPU (HL)",
                content: `<div class="max-w-5xl mx-auto"><div class="text-center"><p class="font-semibold text-blue-600">Syllabus A1.1.3 (HL Only)</p><h2 class="mt-2 text-3xl sm:text-4xl font-extrabold text-gray-900">CPU vs. GPU: Differences Explained</h2><p class="mt-4 text-lg text-slate-600">CPUs and GPUs are both core components, but they are designed with fundamentally different philosophies and for different kinds of tasks.</p></div><div class="mt-12 space-y-10"><div><h3 class="text-2xl font-bold text-gray-800">Design Philosophy & Core Architecture</h3><p class="mt-2 text-slate-600">A <strong>CPU</strong> is a <strong>general-purpose processor</strong> designed for flexibility and <strong>low latency</strong>. It excels at handling a wide variety of tasks quickly, such as running the operating system. It has a few large, powerful cores optimized for sequential processing and complex logic, featuring advanced technologies like <strong>branch prediction</strong>. In contrast, a <strong>GPU</strong> is a <strong>specialized processor</strong> built for <strong>high throughput</strong> and parallel computation. It contains thousands of smaller, simpler cores designed to execute the same instruction on multiple data elements at once (SIMD).</p></div><div class="bg-white border border-zinc-200 p-6 rounded-lg shadow-sm"><h3 class="text-2xl font-bold text-gray-800 text-center">Architectural Comparison</h3><div class="chart-container mt-4"><canvas id="comparison-chart"></canvas></div></div><div><h3 class="text-2xl font-bold text-gray-800">Memory Access & Power Efficiency</h3><p class="mt-2 text-slate-600">CPUs use a memory hierarchy with small, high-speed <strong>cache memory</strong> to reduce latency. GPUs use their own dedicated, high-bandwidth memory called <strong>VRAM (Video RAM)</strong>, to feed their thousands of cores. While a GPU's memory access has higher latency, its massive bandwidth is essential for parallel tasks. GPUs are generally more power-efficient than CPUs for parallelizable tasks.</p></div><div><h3 class="text-2xl font-bold text-gray-800">CPUs and GPUs Working Together</h3><p class="mt-2 text-slate-600">In a typical scenario like playing a video game, tasks are divided between the CPU and GPU to optimize performance.</p><ul class="mt-4 space-y-2 list-disc list-inside text-slate-600"><li><strong>Task Division:</strong> The CPU handles sequential tasks like game logic, physics calculations, and AI behavior. The GPU's role is to render the game's visuals.</li><li><strong>Data Sharing:</strong> The CPU prepares game state data and sends it to the GPU, primarily through the <strong>PCIe bus</strong>.</li><li><strong>Coordinating Execution:</strong> Programming languages like <strong>CUDA</strong> or **OpenCL** are used to manage how tasks are divided and synchronized between the CPU and GPU.</li></ul></div></div></div>`
            },
            simulations: {
                title: "Simulations",
                content: `<div class="text-center"><h2 class="text-3xl sm:text-4xl font-extrabold text-gray-900">Interactive Simulations</h2><p class="mt-4 text-lg text-slate-600">Visualize the complex processes of CPU and GPU operations.</p></div><div class="mt-12 max-w-5xl mx-auto bg-white border border-zinc-200 p-6 rounded-xl shadow-sm"><h3 class="text-2xl font-bold text-center mb-4 text-gray-800">CPU: The Fetch-Decode-Execute Cycle</h3><div id="fde-simulation-container"></div></div><div class="mt-12 max-w-5xl mx-auto bg-white border border-zinc-200 p-6 rounded-xl shadow-sm"><h3 class="text-2xl font-bold text-center mb-2 text-gray-800">GPU: Massive Parallelism Simulation</h3><p class="text-center text-slate-500 mb-4">This grid represents a large computational problem. Run the simulations to see how different architectures would tackle the same workload.</p><div class="flex justify-center flex-wrap gap-3 mb-3"><button type="button" id="run-sequential" class="px-4 py-2 rounded-lg bg-gray-700 text-white hover:bg-gray-800">Run Sequential (CPU)</button><button type="button" id="run-parallel" class="px-4 py-2 rounded-lg bg-blue-600 text-white hover:bg-blue-700">Run Parallel (GPU)</button></div><div class="relative w-full overflow-hidden"><div id="processing-grid" class="mx-auto w-[calc(16rem+15px)] h-[calc(16rem+15px)] grid grid-cols-16 gap-px bg-gray-300 p-px"></div></div><p id="simulation-info" class="text-center text-sm text-slate-500 mt-3 h-5" aria-live="polite">Choose a mode to start the simulation.</p></div>`
            },
            videos: {
                title: "Videos",
                content: `<div class="max-w-5xl mx-auto"><div class="text-center mb-12"><h2 class="text-3xl sm:text-4xl font-extrabold text-gray-900">Video Resources</h2><p class="mt-4 text-lg text-slate-600">Visual explanations can often clarify complex topics. This section contains a curated playlist of high-quality videos that reinforce key concepts.</p></div><div class="grid md:grid-cols-2 gap-8"><div class="bg-white border border-zinc-200 p-4 rounded-xl shadow-sm"><div class="aspect-video rounded-xl overflow-hidden"><iframe class="w-full h-full" src="https://www.youtube.com/embed/dXadoq0fV9s" title="Role of a GPU" allowfullscreen></iframe></div></div><div class="bg-white border border-zinc-200 p-4 rounded-xl shadow-sm"><div class="aspect-video rounded-xl overflow-hidden"><iframe class="w-full h-full" src="https://www.youtube.com/embed/uEIPXvWPEZM" title="CPU vs GPU Explained" allowfullscreen></iframe></div></div><div class="bg-white border border-zinc-200 p-4 rounded-xl shadow-sm"><div class="aspect-video rounded-xl overflow-hidden"><iframe class="w-full h-full" src="https://www.youtube.com/embed/LfdK-v0SbGI" title="How a GPU Works with Parallelism" allowfullscreen></iframe></div></div><div class="bg-white border border-zinc-200 p-4 rounded-xl shadow-sm"><div class="aspect-video rounded-xl overflow-hidden"><iframe class="w-full h-full" src="https://www.youtube.com/embed/1-N-A5-e6-A" title="CPU Memory & Cache" allowfullscreen></iframe></div></div></div></div>`
            },
            quiz: {
                title: "Quiz",
                content: `<div class="text-center mb-12"><h2 class="text-3xl sm:text-4xl font-extrabold text-gray-900">Test Your Knowledge</h2><p class="mt-4 text-lg text-slate-600">You'll face 60 randomly selected questions with a 30-minute time limit. Good luck!</p></div><div id="quiz-container" class="max-w-3xl mx-auto bg-white border border-zinc-200 p-8 rounded-xl shadow-sm"></div>`
            }
        };

        const questionBank = [
            { question: "What is a key characteristic of a GPU's architecture?", options: ["A few powerful cores for serial tasks", "Thousands of smaller, efficient cores for parallel tasks", "A large, low-latency L3 cache", "Direct control over the operating system"], answer: "Thousands of smaller, efficient cores for parallel tasks" },
            { question: "Which application is a primary use case for a GPU?", options: ["Running a web browser", "Managing a file system", "Video game graphics rendering", "Executing spreadsheet formulas"], answer: "Video game graphics rendering" },
            { question: "The ability of a GPU to handle many calculations simultaneously is known as:", options: ["Sequential processing", "Low latency", "Parallel processing", "Branch prediction"], answer: "Parallel processing" },
            { question: "GPUs accelerate the training of AI models by efficiently performing which type of operation?", options: ["Complex decision-making", "Matrix and vector multiplications", "File I/O operations", "User input handling"], answer: "Matrix and vector multiplications" },
            { question: "In the context of design philosophy, a CPU is optimized for:", options: ["High throughput", "Low latency", "Parallelism", "High-bandwidth memory"], answer: "Low latency" },
            { question: "Which component is better suited for running an operating system?", options: ["CPU", "GPU", "VRAM", "PCIe Bus"], answer: "CPU" },
            { question: "What does VRAM stand for?", options: ["Volatile RAM", "Virtual RAM", "Video RAM", "Variable RAM"], answer: "Video RAM" },
            { question: "How do CPUs and GPUs typically share data?", options: ["Via a direct core-to-core link", "Through the L1 cache", "Through the PCIe bus", "Via the internet"], answer: "Through the PCIe bus" },
            { question: "Which feature is characteristic of a CPU core but not a typical GPU core?", options: ["Ability to perform arithmetic", "Access to memory", "Advanced branch prediction", "Low power consumption"], answer: "Advanced branch prediction" },
            { question: "What is the role of a 'shader' in graphics processing?", options: ["To manage system memory", "To handle game logic and AI", "To apply effects like lighting and textures", "To process user keyboard input"], answer: "To apply effects like lighting and textures" },
            { question: "A GPU's architecture is described as having high...?", options: ["Throughput", "Latency", "Versatility", "Complexity per core"], answer: "Throughput" },
            { question: "Which task is offloaded from the CPU to the GPU to improve system performance?", options: ["Opening a new application", "Saving a document", "Rendering 3D models", "Checking for software updates"], answer: "Rendering 3D models" },
            { question: "The design philosophy of a GPU prioritizes:", options: ["Finishing one task as fast as possible", "Processing many tasks simultaneously", "Handling a wide variety of instructions", "Executing operating system commands"], answer: "Processing many tasks simultaneously" },
            { question: "What does SIMD stand for?", options: ["Single Instruction, Multiple Data", "Several Instructions, Many Devices", "Sequential Instruction, Main Data", "Simple Instruction, Memory Division"], answer: "Single Instruction, Multiple Data" },
            { question: "In a gaming scenario, what does the CPU typically handle?", options: ["Drawing pixels on the screen", "Game logic, physics, and AI", "Applying textures to models", "Managing VRAM"], answer: "Game logic, physics, and AI" },
            { question: "Compared to a CPU, a GPU has:", options: ["Fewer, more powerful cores", "More, but simpler cores", "A larger L3 cache", "Higher clock speeds per core"], answer: "More, but simpler cores" },
            { question: "Which is a key reason GPUs are used in scientific computing?", options: ["Their low power consumption", "Their ability to perform large simulations quickly", "Their small physical size", "Their low cost"], answer: "Their ability to perform large simulations quickly"},
            { question: "In a hybrid system, data is shared between the CPU and GPU via the...", options: ["SATA bus", "PCIe bus", "Ethernet port", "USB port"], answer: "PCIe bus"},
            { question: "The term 'unified memory' in CPU-GPU collaboration refers to:", options: ["A type of VRAM", "The CPU's L3 cache", "A shared memory space for both processors", "A special type of register"], answer: "A shared memory space for both processors"},
            { question: "Which processor is more power-efficient for highly parallelizable tasks?", options: ["CPU", "GPU", "Both are equal", "Depends on the task"], answer: "GPU"}
        ];

        // --- Main App Initialization ---
        const mainContent = document.getElementById('main-content');
        Object.keys(sections).forEach(key => {
            const section = document.createElement('section');
            section.id = `${key}`;
            section.className = 'page-content';
            section.innerHTML = sections[key].content;
            mainContent.appendChild(section);
        });

        // --- Feature Initializers ---
        function initializeNavigation() {
            const navLinks = document.querySelectorAll('.nav-link');
            const mobileLinks = document.querySelectorAll('.nav-link-mobile');
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMenu = document.getElementById('mobile-menu');

            function updateActiveState(targetId) {
                document.querySelectorAll('.page-content').forEach(s => s.classList.remove('active'));
                const targetPage = document.getElementById(targetId);
                if (targetPage) targetPage.classList.add('active');

                navLinks.forEach(l => l.classList.toggle('active', l.dataset.target === targetId));
                mobileLinks.forEach(l => l.classList.toggle('active', l.dataset.target === targetId));
                 if (targetId === 'cpuvsgpu') { initializeComparisonChart(); }
                 if (targetId === 'simulations') { initializeFdeCycle(); initializeSimulation(); }
            }
            function handleNavClick(e) {
                e.preventDefault();
                const targetId = e.currentTarget.dataset.target;
                updateActiveState(targetId);
                if (!mobileMenu.classList.contains('hidden')) {
                    mobileMenu.classList.add('hidden');
                }
            }

            navLinks.forEach(link => link.addEventListener('click', handleNavClick));
            mobileLinks.forEach(link => link.addEventListener('click', handleNavClick));
            mobileMenuButton.addEventListener('click', () => mobileMenu.classList.toggle('hidden'));
            
            updateActiveState('home');
        }
        function initializeFdeCycle() {
            const container = document.getElementById('fde-simulation-container');
            if (!container || container.dataset.initialized) return;
            
            const setupHTML = () => { container.innerHTML = `<div class="grid grid-cols-1 md:grid-cols-2 gap-8"><div class="space-y-4"><h4 class="text-xl font-bold text-center">CPU Components</h4><div class="grid grid-cols-2 gap-4"><div id="fde-pc" class="fde-component border-2 p-3 rounded-lg text-center"><strong>PC:</strong> <span id="pc-val">0</span></div><div id="fde-mar" class="fde-component border-2 p-3 rounded-lg text-center"><strong>MAR:</strong> <span id="mar-val">...</span></div><div id="fde-ir" class="fde-component border-2 p-3 rounded-lg text-center"><strong>IR:</strong> <span id="ir-val">...</span></div><div id="fde-mdr" class="fde-component border-2 p-3 rounded-lg text-center"><strong>MDR:</strong> <span id="mdr-val">...</span></div><div id="fde-cu" class="fde-component border-2 p-3 rounded-lg text-center col-span-2"><strong>Control Unit</strong></div><div id="fde-ac" class="fde-component border-2 p-3 rounded-lg text-center col-span-2"><strong>Accumulator:</strong> <span id="ac-val">...</span></div></div></div><div class="space-y-4"><h4 class="text-xl font-bold text-center">RAM (Memory)</h4><div id="fde-ram" class="space-y-2 bg-gray-200 p-4 rounded-lg"></div></div></div><div class="mt-6 pt-6 border-t border-gray-200"><div class="flex flex-col md:flex-row items-center justify-between gap-4"><div class="flex-1"><h4 id="fde-stage" class="text-2xl font-bold text-blue-600">Stage: Idle</h4><p id="fde-explanation" class="text-gray-600 mt-1 min-h-[40px]">Click "Start Cycle" to begin the simulation.</p></div><button id="fde-btn" class="bg-blue-600 text-white font-bold py-3 px-6 rounded-lg shadow-md hover:bg-blue-700 transition-colors">Start Cycle</button></div></div>`; };
            setupHTML();
            container.dataset.initialized = 'true';

            const fdeBtn = container.querySelector('#fde-btn');
            const getInitialRamData = () => [ { address: 0, instruction: 'LOAD 4', data: null }, { address: 1, instruction: 'ADD 5', data: null }, { address: 2, instruction: 'STORE 6', data: null }, { address: 3, instruction: 'HALT', data: null }, { address: 4, instruction: null, data: 10 }, { address: 5, instruction: null, data: 5 }, { address: 6, instruction: null, data: 0 } ];
            let ramData = getInitialRamData();
            const fdeRamContainer = container.querySelector('#fde-ram');
            const fdeStage = container.querySelector('#fde-stage');
            const fdeExplanation = container.querySelector('#fde-explanation');
            const fdeValues = { pc: container.querySelector('#pc-val'), mar: container.querySelector('#mar-val'), mdr: container.querySelector('#mdr-val'), ir: container.querySelector('#ir-val'), ac: container.querySelector('#ac-val') };
            const fdeComponents = { pc: container.querySelector('#fde-pc'), mar: container.querySelector('#fde-mar'), mdr: container.querySelector('#fde-mdr'), ir: container.querySelector('#fde-ir'), cu: container.querySelector('#fde-cu'), ac: container.querySelector('#fde-ac') };
            let fdeState = 'idle';

            function initializeRamUI() { if (!fdeRamContainer) return; fdeRamContainer.innerHTML = ''; ramData.forEach(mem => { const memDiv = document.createElement('div'); memDiv.id = `ram-${mem.address}`; memDiv.className = 'fde-component border-2 p-2 rounded-md text-sm flex justify-between bg-white'; memDiv.innerHTML = `<span><strong>${mem.address}:</strong> ${mem.instruction || 'DATA'}</span><span class="font-mono">${mem.data !== null ? mem.data : '...'}</span>`; fdeRamContainer.appendChild(memDiv); }); }
            function resetFDE() { fdeState = 'idle'; fdeBtn.textContent = 'Start Cycle'; fdeBtn.disabled = false; fdeStage.textContent = 'Stage: Idle'; fdeExplanation.textContent = 'Click "Start Cycle" to begin the simulation.'; container.querySelectorAll('.fde-component').forEach(c => c.classList.remove('highlight')); fdeValues.pc.textContent = '0'; ['mar', 'mdr', 'ir', 'ac'].forEach(k => { if(fdeValues[k]) fdeValues[k].textContent = '...'}); ramData = getInitialRamData(); initializeRamUI(); }
            async function runFdeCycle() {
                fdeState = 'running'; fdeBtn.disabled = true; const pcAddress = parseInt(fdeValues.pc.textContent); const instructionData = ramData[pcAddress];
                if (!instructionData || instructionData.instruction === 'HALT') { fdeStage.textContent = 'Stage: Halt'; fdeExplanation.textContent = 'The HALT instruction was found. The cycle is complete.'; fdeBtn.textContent = 'Reset'; fdeBtn.disabled = false; fdeState = 'halted'; return; }
                const highlight = (el) => { container.querySelectorAll('.fde-component').forEach(c => c.classList.remove('highlight')); if (el) el.classList.add('highlight'); };
                const step = async (stage, explanation, component, action = () => {}, delay = 1500) => { highlight(component); fdeStage.textContent = `Stage: ${stage}`; fdeExplanation.textContent = explanation; action(); await new Promise(resolve => setTimeout(resolve, delay)); };
                await step('Fetch', 'FETCH: The Program Counter (PC) address is copied to the Memory Address Register (MAR).', fdeComponents.pc, () => { fdeValues.mar.textContent = pcAddress; });
                await step('Fetch', 'FETCH: The PC is incremented to point to the next instruction.', fdeComponents.pc, () => { fdeValues.pc.textContent = pcAddress + 1; });
                await step('Fetch', 'FETCH: The instruction at the MAR address is fetched from RAM to the Memory Data Register (MDR).', container.querySelector(`#ram-${pcAddress}`), () => { fdeValues.mdr.textContent = instructionData.instruction; });
                await step('Fetch', 'FETCH: The instruction is copied from the MDR to the Instruction Register (IR).', fdeComponents.mdr, () => { fdeValues.ir.textContent = instructionData.instruction; });
                await step('Decode', 'DECODE: The Control Unit (CU) interprets the instruction in the IR.', fdeComponents.cu);
                const [opcode, operand] = fdeValues.ir.textContent.split(' '); const operandAddr = parseInt(operand);
                switch(opcode) {
                    case 'LOAD':
                        await step('Execute', `EXECUTE (LOAD): The data address (${operandAddr}) is sent to the MAR.`, fdeComponents.ir, () => { fdeValues.mar.textContent = operandAddr; });
                        await step('Execute', `EXECUTE (LOAD): The data is fetched from RAM into the MDR.`, container.querySelector(`#ram-${operandAddr}`), () => { fdeValues.mdr.textContent = ramData[operandAddr].data; });
                        await step('Execute', 'EXECUTE (LOAD): The data is copied from the MDR into the Accumulator.', fdeComponents.mdr, () => { fdeValues.ac.textContent = fdeValues.mdr.textContent; });
                        break;
                    case 'ADD':
                        await step('Execute', `EXECUTE (ADD): The data address (${operandAddr}) is sent to the MAR.`, fdeComponents.ir, () => { fdeValues.mar.textContent = operandAddr; });
                        await step('Execute', `EXECUTE (ADD): The number is fetched from RAM into the MDR.`, container.querySelector(`#ram-${operandAddr}`), () => { fdeValues.mdr.textContent = ramData[operandAddr].data; });
                        await step('Execute', 'EXECUTE (ADD): The ALU adds the MDR value to the Accumulator. The result is stored in the Accumulator.', fdeComponents.cu, () => { fdeValues.ac.textContent = parseInt(fdeValues.ac.textContent) + parseInt(fdeValues.mdr.textContent); });
                        break;
                    case 'STORE':
                        await step('Execute', `EXECUTE (STORE): The destination address (${operandAddr}) is sent to the MAR.`, fdeComponents.ir, () => { fdeValues.mar.textContent = operandAddr; });
                        await step('Execute', 'EXECUTE (STORE): The result from the Accumulator is copied to the MDR.', fdeComponents.ac, () => { fdeValues.mdr.textContent = fdeValues.ac.textContent; });
                        await step('Execute', `EXECUTE (STORE): The value in the MDR is stored at the address in RAM.`, container.querySelector(`#ram-${operandAddr}`), () => { ramData[operandAddr].data = parseInt(fdeValues.mdr.textContent); container.querySelector(`#ram-${operandAddr} span.font-mono`).textContent = fdeValues.mdr.textContent; });
                        break;
                }
                highlight(null); fdeBtn.disabled = false; fdeBtn.textContent = 'Next Instruction'; fdeState = 'idle';
            }
            fdeBtn.addEventListener('click', () => { if (fdeState === 'halted') { resetFDE(); } else if (fdeState === 'idle') { runFdeCycle(); } });
            initializeRamUI(); resetFDE();
        }
        function initializeSimulation() {
            const grid = document.getElementById('processing-grid'); if(!grid) return;
            const info = document.getElementById('simulation-info'); const seqBtn = document.getElementById('run-sequential'); const parBtn = document.getElementById('run-parallel'); let isRunning = false; const GRID_SIZE = 256;
            const setupGrid = () => { grid.innerHTML = ''; for (let i = 0; i < GRID_SIZE; i++) { const cell = document.createElement('div'); cell.className = 'processing-grid-cell'; grid.appendChild(cell); } };
            const runAnimation = async (mode) => { if (isRunning) return; isRunning = true; seqBtn.disabled = true; parBtn.disabled = true; setupGrid(); const cells = Array.from(grid.children); if (mode === 'sequential') { info.textContent = 'Running Sequential (CPU)...'; for (let i = 0; i < GRID_SIZE; i++) { cells[i].classList.add('processing'); await new Promise(r => setTimeout(r, 5)); cells[i].classList.remove('processing'); cells[i].classList.add('done'); } } else { info.textContent = 'Running Parallel (GPU)...'; cells.forEach(c => c.classList.add('processing')); await new Promise(r => setTimeout(r, 250)); cells.forEach(c => { c.classList.remove('processing'); c.classList.add('done'); }); } info.textContent = `Simulation Complete: ${mode}.`; isRunning = false; seqBtn.disabled = false; parBtn.disabled = false; };
            seqBtn.addEventListener('click', () => runAnimation('sequential')); parBtn.addEventListener('click', () => runAnimation('parallel')); setupGrid();
        }
        function initializeComparisonChart() {
            const canvas = document.getElementById('comparison-chart'); if (!canvas || canvas.chart) return;
            const chartData = { data: { labels: ['High-End CPU Cores', 'High-End GPU Cores'], datasets: [{ data: [16, 9728], backgroundColor: ['#60A5FA', '#3B82F6'] }] } };
            canvas.chart = new Chart(canvas.getContext('2d'), { type: 'bar', data: chartData.data, options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { display: false }, tooltip:{ bodyFont: { size: 14 }, titleFont: { size: 16 } } }, scales: { y: { type: 'logarithmic', beginAtZero: true, ticks: { callback: function(value) {return Number(value.toString());} } } } } });
        }
        function initializeQuiz() {
            let currentQuizQuestions = []; let currentQuestionIndex = 0; let score = 0; let timerInterval; let timeLeft = 1800; 
            const quizContainer = document.getElementById('quiz-container');
            if (!quizContainer) return;
            function startQuiz() {
                let expandedBank = [];
                while(expandedBank.length < 60) { expandedBank.push(...questionBank); }
                currentQuizQuestions = expandedBank.sort(() => 0.5 - Math.random()).slice(0, 60); 
                currentQuestionIndex = 0; score = 0; timeLeft = 1800; 
                clearInterval(timerInterval); timerInterval = setInterval(updateTimer, 1000);
                showQuestion();
            }
            function updateTimer() {
                const timerEl = document.getElementById('quiz-timer');
                if (timerEl) {
                    timeLeft--; const minutes = Math.floor(timeLeft / 60); const seconds = timeLeft % 60;
                    timerEl.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                    if (timeLeft <= 0) { showResults("Time's up!"); }
                }
            }
            function showQuestion() {
                const questionData = currentQuizQuestions[currentQuestionIndex];
                quizContainer.innerHTML = `<div class="mb-4"><div class="flex justify-between items-center mb-2 text-lg"><h3 class="font-semibold">Question ${currentQuestionIndex + 1} of ${currentQuizQuestions.length}</h3><div class="flex items-center space-x-4"><p class="font-bold text-blue-600">Score: ${score}</p><p id="quiz-timer" class="font-bold text-gray-700 bg-gray-200 px-3 py-1 rounded-md">30:00</p></div></div><div class="w-full bg-gray-200 rounded-full h-2.5"><div class="bg-blue-500 h-2.5 rounded-full" style="width: ${((currentQuestionIndex + 1) / currentQuizQuestions.length) * 100}%"></div></div></div><h4 class="text-xl font-bold mb-5 text-gray-800">${questionData.question}</h4><div id="options-container" class="space-y-3"></div><div id="feedback-container" class="mt-4 text-center font-semibold"></div><div class="mt-6 text-right"><button id="next-btn" class="bg-gray-400 text-white font-bold py-2 px-6 rounded-lg shadow-sm cursor-not-allowed" disabled>Next</button></div>`;
                const optionsContainer = document.getElementById('options-container');
                questionData.options.forEach(option => {
                    const button = document.createElement('button');
                    button.className = 'quiz-option block w-full text-left p-3 border-2 border-gray-200 rounded-lg hover:bg-gray-100';
                    button.textContent = option;
                    button.addEventListener('click', () => selectAnswer(button, option, questionData.answer));
                    optionsContainer.appendChild(button);
                });
                document.getElementById('next-btn').addEventListener('click', nextQuestion);
                updateTimer();
            }
            function selectAnswer(button, selectedOption, correctAnswer) {
                document.querySelectorAll('.quiz-option').forEach(btn => btn.disabled = true);
                const feedbackContainer = document.getElementById('feedback-container'); const nextBtn = document.getElementById('next-btn');
                if (selectedOption === correctAnswer) {
                    score++; button.classList.add('correct');
                    feedbackContainer.innerHTML = `<p class="text-green-600">✅ Correct!</p>`;
                } else {
                    button.classList.add('incorrect'); feedbackContainer.innerHTML = `<p class="text-red-600">❌ Incorrect. The correct answer is "${correctAnswer}".</p>`;
                    const correctButton = Array.from(document.querySelectorAll('.quiz-option')).find(btn => btn.textContent === correctAnswer);
                    if (correctButton) correctButton.classList.add('correct');
                }
                nextBtn.disabled = false; nextBtn.classList.remove('bg-gray-400', 'cursor-not-allowed'); nextBtn.classList.add('bg-blue-600', 'hover:bg-blue-700');
                if (currentQuestionIndex === currentQuizQuestions.length - 1) { nextBtn.textContent = 'See Results'; }
            }
            function nextQuestion() {
                currentQuestionIndex++;
                if (currentQuestionIndex < currentQuizQuestions.length) { showQuestion(); } else { showResults(); }
            }
            function showResults(message = "Quiz Complete!") {
                clearInterval(timerInterval);
                quizContainer.innerHTML = `<div class="text-center"><h2 class="text-2xl font-bold mb-2">${message}</h2><p class="text-lg mb-4">You scored</p><p class="text-5xl font-extrabold text-blue-600 mb-6">${score} out of ${currentQuizQuestions.length}</p><button id="restart-quiz-btn" class="bg-blue-600 text-white font-bold py-3 px-8 rounded-lg shadow-md hover:bg-blue-700 transition-colors">Try Again</button></div>`;
                document.getElementById('restart-quiz-btn').addEventListener('click', showStartScreen);
            }
            function showStartScreen() {
                 clearInterval(timerInterval);
                quizContainer.innerHTML = `<div class="text-center"><button id="start-quiz-btn" class="bg-blue-600 text-white font-bold py-3 px-8 rounded-lg shadow-md hover:bg-blue-700 transition-colors">Start 60-Question Test</button></div>`;
                document.getElementById('start-quiz-btn').addEventListener('click', startQuiz);
            }
            showStartScreen();
        }
        
        // --- Initial Load ---
        initializeNavigation();
        initializeQuiz(); 
    });
    </script>
</body>
</html>

